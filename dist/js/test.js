!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}({3:function(t,e){customElements.define("print-string",class extends HTMLElement{constructor(){super();const t=document.getElementById("print-string").content;this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(t.cloneNode(!0)),this.$container=this._shadowRoot.querySelector(".js-container"),this.stateLayout=this.getAttribute("layout"),this.stateOrder=this.getAttribute("order"),this.textOutputCached=""}static get observedAttributes(){return["text","layout","order"]}attributeChangedCallback(t,e,r){switch(t){case"text":this.getValue(r);break;case"layout":this.handleLayout(r);break;case"order":this.handleOrder(r)}}handleLayout(t){t!==this.stateLayout&&(this.stateLayout=t,this.$container.classList.toggle("column"))}handleOrder(t){t!==this.stateOrder&&(this.stateOrder=t,this.getValue(this.getAttribute("text")))}getValue(t){let e=this.formatString(t);switch(this.stateOrder){case"direct":break;case"reverse":e=this.reverseString(e);break;case"random":e=this.shuffleString(e);break;default:throw new Error("Unrecognized state order")}this.render(this.textOutputCached,e),this.textOutputCached=e}formatString(t){return t.replace(/\s/g,"").toUpperCase()}reverseString(t){return t.split("").reverse().join("")}shuffleString(t){let e=t.split("");for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e.join("")}render(t,e){const r=this;t!==e&&(0!==e.length?0!==t.length||0===e.length?this.levenshteinDistance(e,t).forEach(function(t){switch(t.type){case"R":r.replaceBlock(e[t.dest-1],t.src-1);break;case"A":r.addBlock(e[t.dest-1],t.src);break;case"D":r.delBlock(t.src-1);break;default:throw new Error("Diff Error")}}):e.split("").forEach(function(t,e){r.addBlock(t,e)}):this.removeAll())}replaceBlock(t,e){const r=this.intToRGB(this.hashCode(`${t}hashpadding`)),n=this.$container.children[e];n.innerHTML=t,n.style.backgroundColor=`#${r}`}addBlock(t,e){const r=this.intToRGB(this.hashCode(`${t}hashpadding`)),n=document.createElement("div");n.className="print-string__item",n.innerHTML=t,n.style.backgroundColor=`#${r}`,0===e?this.$container.appendChild(n):this.$container.insertBefore(n,this.$container.children[e])}delBlock(t){this.$container.removeChild(this.$container.children[t])}removeAll(){this.$container.innerHTML=""}levenshteinDistance(t,e){const r=Array(e.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let e=0;e<=t.length;e+=1)r[0][e]=e;for(let t=0;t<=e.length;t+=1)r[t][0]=t;for(let n=1;n<=e.length;n+=1)for(let o=1;o<=t.length;o+=1){const s=t[o-1]===e[n-1]?0:1;r[n][o]=Math.min(r[n][o-1]+1,r[n-1][o]+1,r[n-1][o-1]+s)}let n=[],o=e.length,s=t.length,i=r;do{const r=o>1&&s>1?i[o-1][s-1]:-1,a=o>1?i[o-1][s]:-1,l=s>1?i[o][s-1]:-1;switch(Math.min(...[r,a,l].filter(t=>-1!=t))){case r:t[s-1]!=e[o-1]&&n.push({type:"R",src:o,dest:s}),o-=1,s-=1;break;case l:n.push({type:"A",src:o,dest:s}),s-=1;break;case a:n.push({type:"D",src:o}),o-=1;break;default:throw new Error("MinRda Error")}1==o&&1==s&&t[s-1]!=e[o-1]&&n.push({type:"R",src:o,dest:s})}while(1!=o||1!=s);return n}hashCode(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);return e}intToRGB(t){const e=(16777215&t).toString(16).toUpperCase();return"00000".substring(0,6-e.length)+e}})}});
//# sourceMappingURL=test.js.map